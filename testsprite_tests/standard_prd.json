{
  "meta": {
    "project": "SYNAPSE — Medical Study Ecosystem",
    "date": "2026-02-21",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "SYNAPSE is a web-based medical study ecosystem that unifies document management, FSRS-powered spaced-repetition study sessions, clinical simulations and AI-assisted content generation. The PRD (see source pages 1–4) emphasizes FSRS, multimodal AI (Synapse AI) and a Zettelkasten-style knowledge graph to optimize learning and clinical reasoning.",
  "core_goals": [
    "Provide an integrated study workflow: capture documents, generate study material, review using FSRS, and apply knowledge in simulated clinical cases.",
    "Deliver reliable user access and data management (auth, storage, profile/settings) with secure sync and offline-capable design.",
    "Expose high-impact analytics and calendar scheduling to help users plan and measure progress.",
    "Enable AI-assisted content generation (flashcards, summaries, citations) and knowledge graph linking to reduce administrative load and increase retention.",
    "Prioritize performance and clear failure states; surface issues (e.g., storage misconfiguration) to users and provide recovery paths."
  ],
  "features": [
    {
      "name": "User Login",
      "description": "Authenticate users with email and password via Supabase Auth (entry route /login). Handles successful sign-in, redirects to the dashboard, and shows clear errors on failure.",
      "user_flows": [
        "Navigate to /login -> Fill email input field -> Fill password input field -> Click Login button to submit -> See dashboard at / or /dashboard",
        "Navigate to /login -> Fill email input field with invalid email format -> Click Login button to submit -> See validation error message under email field",
        "Navigate to /login -> Fill email input field -> Fill wrong password -> Click Login button to submit -> See error message on invalid credentials",
        "Navigate to /login -> Click \"Forgot password\" link -> Navigate to /forgot-password"
      ]
    },
    {
      "name": "User Registration (Multi-step)",
      "description": "Multi-step sign-up flow capturing personal info, academic details and study preferences (entry route /register). Progress controls (next/back) guide users through steps and submit via Supabase signUp.",
      "user_flows": [
        "Navigate to /register -> Fill name, email, password fields in step 1 -> Click next to proceed to step 2",
        "On /register step 2 -> Select university, career, year -> Click next to proceed to step 3",
        "On /register step 3 -> Select study preferences -> Click submit -> See success confirmation and automatic sign-in or redirect to /login",
        "Navigate to /register -> Leave required field empty in step 1 -> Click next -> See inline validation error and stay on current step"
      ]
    },
    {
      "name": "Password Recovery",
      "description": "Request a password reset email using Supabase (entry route /forgot-password). Shows success confirmation or error if email is not found or network fails.",
      "user_flows": [
        "Navigate to /forgot-password -> Fill email input -> Click send recovery email button -> See success message confirming recovery email sent",
        "Navigate to /forgot-password -> Fill unregistered email -> Click send recovery email button -> See error message indicating email not found or cannot send",
        "Navigate to /forgot-password -> Fill email input -> Click send recovery email button -> Network failure occurs -> See retry option and error notification"
      ]
    },
    {
      "name": "Dashboard (Overview)",
      "description": "Landing page with study streak, upcoming exams, recent activity and quick action cards (entry route / and /dashboard). Serves as central navigation hub to study, library, calendar, analytics and settings.",
      "user_flows": [
        "Navigate to / -> See study streak and statistics panel -> See upcoming exams list -> See quick action cards",
        "On / -> Click quick action card for Study -> Navigate to /study",
        "Navigate to / -> Data fetch for study_stats fails -> See empty state placeholder and an error banner with retry action"
      ]
    },
    {
      "name": "Document Library",
      "description": "Upload, browse, search, filter and manage PDF documents stored in Supabase Storage; create collections and tag documents (entry route /library). Supports drag & drop and list/grid views.",
      "user_flows": [
        "Navigate to /library -> Click upload button to open file picker -> Select PDF file -> See upload progress -> See uploaded document appear in list",
        "Navigate to /library -> Drag and drop files to upload area -> See upload progress -> See files added to selected collection",
        "Navigate to /library -> Browse documents in grid view -> Click document to open reader -> Navigate to /library/document/:id",
        "Navigate to /library -> Use search input -> Enter document name or tag -> See filtered results",
        "Navigate to /library -> Apply filter by collection -> See filtered list",
        "Navigate to /library -> Click manage collections -> Create new collection -> See collection added to sidebar",
        "Navigate to /library -> Select document -> Add tag -> See tag attached to document",
        "Navigate to /library -> Select document -> Click delete -> Confirm deletion -> See document removed from list",
        "Navigate to /library -> Click upload button -> Select PDF file -> Upload attempt fails because Supabase Storage 'documents' bucket is misconfigured or RLS blocks upload -> See upload error banner (known limitation: uploads may silently fail; surface explicit error and recovery steps)"
      ]
    },
    {
      "name": "Document Reader (PDF Viewer)",
      "description": "Render PDFs in-app using react-pdf; allow page navigation, zoom controls and download (entry route /library/document/:id). Uses signed URLs from Supabase Storage.",
      "user_flows": [
        "Navigate to /library/document/:id -> Viewer fetches signed URL -> See first PDF page rendered",
        "On /library/document/:id -> Click next page control -> See next page render",
        "On /library/document/:id -> Click zoom in control -> See PDF zoomed in",
        "On /library/document/:id -> Click Download button -> Browser downloads PDF",
        "Navigate to /library/document/:id -> Create signed URL request fails -> See error message that document cannot be loaded and a retry button"
      ]
    },
    {
      "name": "Study Session with FSRS",
      "description": "Select flashcard decks and run FSRS-powered study sessions; flip cards, rate difficulty and update review logs (entry routes /study and /study/session). Tracks session progress and updates card stability/streaks.",
      "user_flows": [
        "Navigate to /study -> Select a flashcard deck from list -> Click Start study session -> Navigate to /study/session",
        "On /study/session -> See first flashcard front -> Click Flip card -> See answer/back of card",
        "On /study/session -> After viewing answer -> Click rating (Again, Hard, Good, Easy) -> See session progress increment and next card",
        "On /study/session -> Complete all cards -> See session completion stats and summary",
        "Navigate to /study -> Click deck -> API fetch for flashcards fails -> See error banner with retry action and option to return to /study"
      ]
    },
    {
      "name": "Synapse AI — Flashcard & Summary Generator",
      "description": "AI-assisted multimodal tool (described in PRD pages 1–3) to ingest PDFs and generate flashcards, structured summaries and citation lists. Intended to reduce manual authoring and speed study prep.",
      "user_flows": [
        "From Library or Upload UI -> Select PDF and click 'Generate with AI' -> Upload PDF to AI processing -> See progress indicator",
        "After AI processing completes -> See generated flashcards preview -> Click 'Import to deck' -> Flashcards added to user's deck",
        "From Library -> Select PDF -> Click 'Generate summary and citations' -> See structured summary and citation list (AMA/APA) displayed",
        "Select PDF -> Click 'Generate with AI' -> AI processing fails due to model error or quota -> See error message with retry and manual export option"
      ]
    },
    {
      "name": "Clinical Case Simulations (Neural Consult)",
      "description": "Simulated clinical cases and OSCE-style interactions for practice and feedback (entry route /simulations). Current implementation includes extensive UI/CSS but limited interactivity — surface clear expectations and fallback behavior.",
      "user_flows": [
        "Navigate to /simulations -> Browse available clinical cases -> Click a case to open -> See case overview and start button",
        "On a case -> Click Start simulation -> Interact with simulation prompts -> Receive structured feedback at end of case",
        "Navigate to /simulations -> Click a case -> Attempt interactive step but interactive controls are limited -> See notice explaining limited functionality and offer to run a static scenario or view worked solution (known limitation)"
      ]
    },
    {
      "name": "Analytics (Progress & Charts)",
      "description": "Visualize study progress, FSRS metrics and session history using charts (entry route /analytics). Allow date-range filters and exporting reports (React PDF used for export).",
      "user_flows": [
        "Navigate to /analytics -> See study progress charts and key metrics populated from review logs",
        "On /analytics -> Set date range filter -> Charts update to reflect selected range",
        "On /analytics -> Click Export report -> Generate PDF report -> See download prompt",
        "Navigate to /analytics -> Large dataset causes slow rendering -> See spinner for extended time and an option to reduce range or download raw data (known limitation: large component files may affect performance)"
      ]
    },
    {
      "name": "Calendar & Exam Scheduling",
      "description": "Schedule exams and view study plan on a calendar; link scheduled exams to study targets and quick actions (entry route /calendar).",
      "user_flows": [
        "Navigate to /calendar -> See monthly calendar view with scheduled exams highlighted",
        "On /calendar -> Click a date -> Click 'Add exam' -> Fill exam title, date and reminders -> Click Save -> See exam appear on calendar",
        "On /calendar -> Click scheduled exam -> See exam details and quick actions to add study sessions",
        "On /calendar -> Editing or saving exam fails due to slow rendering or network -> See error toast and option to retry (known limitation: performance on lower-end devices)"
      ]
    },
    {
      "name": "Settings & Profile",
      "description": "Manage user profile, notification preferences, appearance (theme), language, privacy and data export/import (entry route /settings).",
      "user_flows": [
        "Navigate to /settings -> Edit profile information fields -> Click Save -> See success confirmation",
        "Navigate to /settings -> Toggle notification preferences -> Changes saved immediately or via Save button -> See confirmation",
        "Navigate to /settings -> Change theme -> Theme updates across app immediately",
        "Navigate to /settings -> Click Export data -> System builds export -> See download prompt or email link",
        "Navigate to /settings -> Click Export data -> Export fails due to server error -> See error notification and retry option"
      ]
    },
    {
      "name": "Knowledge Graph / Zettelkasten (Evergreen Notes & MOCs)",
      "description": "Capture atomic notes, create bidirectional links, build MOCs (Maps of Content) and refactor notes using AI to generate personalized simulations (described in PRD page 3). Supports linking notes to flashcards and cases.",
      "user_flows": [
        "Open Notes UI -> Click 'New note' -> Enter atomic note content (title + body) -> Click Save -> See note appear in index",
        "On a note -> Click 'Create link' -> Select existing note to link -> See bidirectional link created",
        "Open MOC editor -> Add notes to MOC index -> Click Save -> See MOC listed in navigation",
        "Select collection of linked notes -> Click 'Refactor with AI' -> AI suggests merged/expanded notes and possible related cases -> Accept suggestion to update notes",
        "Attempt to refactor with AI -> AI model fails or times out -> See error modal and rollback option"
      ]
    },
    {
      "name": "QBank (Question Bank & Evidence Links)",
      "description": "Multidimensional question bank (described in PRD page 2) with evidence-linked feedback tied to clinical guidelines and references. Intended to power micro-learning sessions and prevent rote memorization of questions.",
      "user_flows": [
        "Open QBank UI -> Browse question categories -> Click question to attempt -> See question and answer choices",
        "On a question -> Select an answer -> Click Submit -> See immediate feedback with linked GPC/UpToDate/PubMed references",
        "From question feedback -> Click 'Create flashcard from question' -> Flashcard is generated and added to selected deck",
        "Attempt to fetch QBank items -> API returns empty or error -> See fallback message and option to retry or switch to offline cached content"
      ]
    }
  ],
  "code_summary": {
    "version": "2",
    "type": "frontend",
    "tech_stack": [
      "JavaScript",
      "React 18",
      "Vite 5",
      "React Router DOM 6",
      "Supabase JS SDK",
      "Recharts",
      "React PDF",
      "Lucide React Icons"
    ],
    "routes": [
      {
        "path": "/login",
        "file": "src/pages/Login.jsx",
        "auth_required": false,
        "description": "User login page with email and password"
      },
      {
        "path": "/register",
        "file": "src/pages/Register.jsx",
        "auth_required": false,
        "description": "User registration page with multi-step form"
      },
      {
        "path": "/forgot-password",
        "file": "src/pages/ForgotPassword.jsx",
        "auth_required": false,
        "description": "Password recovery page"
      },
      {
        "path": "/",
        "file": "src/pages/Dashboard.jsx",
        "auth_required": true,
        "description": "Main dashboard with study stats, upcoming exams, and quick actions"
      },
      {
        "path": "/dashboard",
        "file": "src/pages/Dashboard.jsx",
        "auth_required": true,
        "description": "Dashboard alias route"
      },
      {
        "path": "/library",
        "file": "src/pages/Library.jsx",
        "auth_required": true,
        "description": "Document library with file upload, collections, tags, search and filtering"
      },
      {
        "path": "/library/document/:id",
        "file": "src/pages/DocumentReader.jsx",
        "auth_required": true,
        "description": "PDF document reader with viewer"
      },
      {
        "path": "/study",
        "file": "src/pages/StudyAI.jsx",
        "auth_required": true,
        "description": "AI-powered study page with flashcard decks"
      },
      {
        "path": "/study/session",
        "file": "src/pages/StudySession.jsx",
        "auth_required": true,
        "description": "Active flashcard study session with FSRS algorithm"
      },
      {
        "path": "/simulations",
        "file": "src/pages/ClinicalCases.jsx",
        "auth_required": true,
        "description": "Clinical case simulations"
      },
      {
        "path": "/analytics",
        "file": "src/pages/Analytics.jsx",
        "auth_required": true,
        "description": "Study analytics and progress charts"
      },
      {
        "path": "/calendar",
        "file": "src/pages/Calendar.jsx",
        "auth_required": true,
        "description": "Study calendar and exam scheduling"
      },
      {
        "path": "/settings",
        "file": "src/pages/Settings.jsx",
        "auth_required": true,
        "description": "User settings for profile, notifications, appearance, privacy"
      }
    ],
    "features": [
      {
        "name": "User Login",
        "description": "Login with email and password via Supabase Auth",
        "files": [
          "src/pages/Login.jsx",
          "src/context/AuthContext.jsx",
          "src/config/supabase.js"
        ],
        "entry_route": "/login",
        "user_interactions": [
          "Fill email input field",
          "Fill password input field",
          "Click Login button to submit",
          "See error message on invalid credentials",
          "Click \"Forgot password\" link to navigate to password recovery",
          "Click \"Register\" link to navigate to registration"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "supabase.auth.signInWithPassword"
          }
        ],
        "auth_required": false
      },
      {
        "name": "User Registration",
        "description": "Multi-step registration form with personal data, academic info, and preferences",
        "files": [
          "src/pages/Register.jsx",
          "src/context/AuthContext.jsx"
        ],
        "entry_route": "/register",
        "user_interactions": [
          "Fill name, email, password fields in step 1",
          "Select university, career, year in step 2",
          "Select study preferences in step 3",
          "Click next/back to navigate between steps",
          "Submit registration form"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "supabase.auth.signUp"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Password Recovery",
        "description": "Send password reset email via Supabase Auth",
        "files": [
          "src/pages/ForgotPassword.jsx",
          "src/context/AuthContext.jsx"
        ],
        "entry_route": "/forgot-password",
        "user_interactions": [
          "Fill email input",
          "Click send recovery email button",
          "See success/error message"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "supabase.auth.resetPasswordForEmail"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Document Library",
        "description": "Upload, browse, search, filter, and manage PDF documents stored in Supabase Storage",
        "files": [
          "src/pages/Library.jsx",
          "src/context/LibraryContext.jsx",
          "src/config/supabase.js"
        ],
        "entry_route": "/library",
        "user_interactions": [
          "Click upload button to open file picker",
          "Drag and drop files to upload area",
          "Browse documents in grid or list view",
          "Search documents by name or tags",
          "Filter by collection or type",
          "Create and manage collections",
          "Add/remove tags on documents",
          "Delete documents",
          "Click document to open reader"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "supabase.storage.from('documents').upload"
          },
          {
            "method": "POST",
            "endpoint": "supabase.from('documents').insert"
          },
          {
            "method": "GET",
            "endpoint": "supabase.from('documents').select"
          },
          {
            "method": "DELETE",
            "endpoint": "supabase.from('documents').delete"
          },
          {
            "method": "DELETE",
            "endpoint": "supabase.storage.from('documents').remove"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Document Reader",
        "description": "View PDF documents using react-pdf inside the app",
        "files": [
          "src/pages/DocumentReader.jsx"
        ],
        "entry_route": "/library/document/:id",
        "user_interactions": [
          "View PDF pages",
          "Navigate between pages",
          "Zoom in/out",
          "Download document"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "supabase.storage.from('documents').createSignedUrl"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Dashboard",
        "description": "Overview page with study statistics, upcoming exams, recent activity, and quick action cards",
        "files": [
          "src/pages/Dashboard.jsx",
          "src/context/StudyStatsContext.jsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "View study streak and statistics",
          "See upcoming exams",
          "Click quick action cards to navigate to features",
          "View recent study activity"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "supabase.from('study_sessions').select"
          },
          {
            "method": "GET",
            "endpoint": "supabase.from('exams').select"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Study Session with FSRS",
        "description": "Flashcard study sessions using the FSRS spaced repetition algorithm",
        "files": [
          "src/pages/StudySession.jsx",
          "src/pages/StudyAI.jsx",
          "src/context/FSRSContext.jsx"
        ],
        "entry_route": "/study",
        "user_interactions": [
          "Select a flashcard deck",
          "Start study session",
          "Flip cards to see answers",
          "Rate card difficulty (Again, Hard, Good, Easy)",
          "See session progress and completion stats"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "supabase.from('flashcards').select"
          },
          {
            "method": "PATCH",
            "endpoint": "supabase.from('flashcards').update"
          },
          {
            "method": "POST",
            "endpoint": "supabase.from('review_logs').insert"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Settings",
        "description": "User preferences for profile, notifications, appearance, language, and privacy",
        "files": [
          "src/pages/Settings.jsx",
          "src/context/SettingsContext.jsx"
        ],
        "entry_route": "/settings",
        "user_interactions": [
          "Edit profile information",
          "Toggle notification preferences",
          "Change theme and appearance",
          "Select language",
          "Export/import data",
          "Clear all data"
        ],
        "api_calls": [],
        "auth_required": true
      }
    ],
    "known_limitations": [
      {
        "issue": "Document upload may silently fail if Supabase Storage bucket 'documents' is not properly configured or RLS policies block uploads",
        "location": "src/context/LibraryContext.jsx",
        "impact": "Users cannot upload documents - the upload appears to do nothing"
      },
      {
        "issue": "Clinical Cases page has extensive CSS but limited interactive functionality",
        "location": "src/pages/ClinicalCases.jsx",
        "impact": "Feature may appear incomplete to users"
      },
      {
        "issue": "Calendar and Analytics have large component files that may have performance issues",
        "location": "src/pages/Calendar.jsx, src/pages/Analytics.jsx",
        "impact": "Potential slow rendering on lower-end devices"
      }
    ]
  }
}
