{
  "meta": {
    "project": "SYNAPSE Medical Learning Platform",
    "date": "2026-02-21",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "SYNAPSE is a medical learning ecosystem that unifies active-recall study, knowledge management and clinical simulation into a single web app powered by Supabase auth/storage and a spaced-repetition core. (See SYNAPSE architecture and feature descriptions across the source PRD: FSRS algorithm on pages 1-2, Smart Prep and AI multimodal features on pages 2-3, and knowledge/Zettelkasten details on page 3.)",
  "core_goals": [
    "Provide secure, single-sign-on access and user account lifecycle (signup, login, password recovery) using Supabase Auth.",
    "Deliver a protected personalized dashboard that surfaces study stats, flashcards and clinical cases.",
    "Support a document library for upload, organization and automatic processing (flashcard generation) with storage and metadata tracking.",
    "Enforce route protection so only authenticated users access protected resources.",
    "Enable high-availability and offline-ready study experiences; follow security best practices outlined in the PRD (SOC2/ISO 27001 guidance).",
    "Instrument for retention-optimized study flows informed by the FSRS spaced-repetition approach described in the PRD (pages 1-2)."
  ],
  "features": [
    {
      "name": "User Login",
      "description": "Authenticate existing users via email/password or Google OAuth and return an authenticated session for subsequent protected API calls.",
      "user_flows": [
        "POST supabase.auth.signInWithPassword({email,password}) -> Receive 200 with session object and access_token -> GET supabase.from('profiles').select('*').eq('id', user.id) with Authorization: Bearer <access_token> -> Receive user profile record",
        "POST supabase.auth.signInWithOAuth({provider: 'google'}) -> Receive OAuth redirect URL and then callback POST /auth/callback with provider token -> Receive 200 with session and access_token -> GET supabase.from('profiles').select('*').eq('id', user.id) with token -> Receive user profile",
        "POST supabase.auth.signInWithPassword({email, wrong_password}) -> Receive 400 error 'Invalid login credentials' -> GET supabase.from('profiles').select('*') with no token -> Receive 401 Unauthorized"
      ]
    },
    {
      "name": "User Registration",
      "description": "Create new users with email verification; create an associated profile record for personalization and study data.",
      "user_flows": [
        "POST supabase.auth.signUp({email,password,options:{redirectTo}}) -> Receive 200 with user object and confirmation email pending -> POST supabase.from('profiles').insert({id: user.id, full_name}) with Authorization: Bearer <access_token> -> Receive 201 profile created",
        "POST supabase.auth.signUp({email,password}) with existing email -> Receive 400 error 'User already registered' -> POST supabase.from('profiles').insert(...) with duplicated id -> Receive 409 Conflict"
      ]
    },
    {
      "name": "Password Recovery",
      "description": "Allow users to request a password reset email and update their password via the reset link.",
      "user_flows": [
        "POST supabase.auth.resetPasswordForEmail({email}) -> Receive 200 confirmation 'Password reset email sent' -> User clicks emailed link and POST supabase.auth.updateUser({access_token_from_link, password}) -> Receive 200 with updated user session",
        "POST supabase.auth.resetPasswordForEmail({unknown_email}) -> Receive 400 error 'Email not found' or no-op response -> Attempt POST supabase.auth.updateUser({invalid_token, password}) -> Receive 401 Invalid or expired token"
      ]
    },
    {
      "name": "Route Protection",
      "description": "Protect application routes so unauthenticated requests are rejected and authenticated requests can access dashboard and library resources.",
      "user_flows": [
        "GET supabase.from('studies').select('stats').eq('user_id', <user.id>) with Authorization: Bearer <access_token> -> Receive 200 with study stats (allowed for authenticated user)",
        "GET supabase.from('studies').select('stats') with missing/expired token -> Receive 401 Unauthorized"
      ]
    },
    {
      "name": "Medical Study Dashboard",
      "description": "Fetch and display personalized study statistics, prioritized flashcards and recent clinical cases for the logged-in user (the hub for active-recall workflows described in the PRD). See dashboard concept and item types referenced in the PRD (pages 1-3).",
      "user_flows": [
        "GET supabase.from('studies').select('stats').eq('user_id', <user.id>) with Authorization: Bearer <access_token> -> Receive 200 with aggregated study statistics",
        "GET supabase.from('flashcards').select('*').eq('user_id', <user.id>).limit(20) with token -> Receive 200 with prioritized flashcards for today's reviews",
        "GET supabase.from('cases').select('*').eq('user_id', <user.id>).limit(5) with token -> Receive 200 with recent clinical cases",
        "GET supabase.from('studies').select('stats') with expired token -> Receive 401 Unauthorized -> GET supabase.from('flashcards') during backend error -> Receive 500 Internal Server Error"
      ]
    },
    {
      "name": "Document Library",
      "description": "Upload, store and organize study documents (PDFs) and persist metadata; support retrieval and future AI processing (flashcard generation) as described in the Smart Prep section (PRD pages 2-3).",
      "user_flows": [
        "POST supabase.storage.from('documents').upload('userId/filename.pdf', file) with Authorization: Bearer <access_token> -> Receive 200 with upload metadata including path and size",
        "POST supabase.from('documents').insert({user_id: <user.id>, storage_path: 'userId/filename.pdf', title: 'Guideline XYZ'}) with token -> Receive 201 document metadata record",
        "GET supabase.storage.from('documents').getPublicUrl('userId/filename.pdf') with token -> Receive 200 with signed/public URL for download",
        "POST supabase.storage.from('documents').upload(...) with file > size limit -> Receive 413 Payload Too Large -> POST supabase.from('documents').insert(...) without auth -> Receive 401 Unauthorized"
      ]
    }
  ],
  "code_summary": {
    "version": "2",
    "type": "frontend",
    "tech_stack": [
      "React 18",
      "Vite 5",
      "Supabase Auth (email/password + Google OAuth)",
      "React Router v6",
      "CSS (custom, no framework)",
      "Lucide React icons"
    ],
    "features": [
      {
        "name": "User Login",
        "description": "Email/password login with error handling and Google OAuth",
        "files": [
          "src/pages/Login.jsx",
          "src/pages/Login.css",
          "src/context/AuthContext.jsx",
          "src/config/supabase.js"
        ],
        "pages": [
          {
            "path": "/login",
            "description": "Login page with email/password form and Google OAuth button"
          }
        ]
      },
      {
        "name": "User Registration",
        "description": "New user signup with email verification",
        "files": [
          "src/pages/Register.jsx",
          "src/pages/Register.css",
          "src/context/AuthContext.jsx"
        ],
        "pages": [
          {
            "path": "/register",
            "description": "Registration form with email, name, password, and password strength indicators"
          }
        ]
      },
      {
        "name": "Password Recovery",
        "description": "Password reset via email link",
        "files": [
          "src/pages/ForgotPassword.jsx",
          "src/pages/ForgotPassword.css",
          "src/context/AuthContext.jsx"
        ],
        "pages": [
          {
            "path": "/forgot-password",
            "description": "Email input form to send password reset link"
          }
        ]
      },
      {
        "name": "Route Protection",
        "description": "Protected routes redirect unauthenticated users to login",
        "files": [
          "src/components/ProtectedRoute.jsx",
          "src/context/AuthContext.jsx"
        ],
        "pages": [
          {
            "path": "/",
            "description": "Dashboard (protected, requires authentication)"
          }
        ]
      },
      {
        "name": "Medical Study Dashboard",
        "description": "Main dashboard with study statistics and navigation",
        "files": [
          "src/pages/Dashboard.jsx",
          "src/pages/Dashboard.css"
        ],
        "pages": [
          {
            "path": "/",
            "description": "Dashboard showing study stats, flashcards, and clinical cases"
          }
        ]
      },
      {
        "name": "Document Library",
        "description": "Upload, manage, and organize study documents",
        "files": [
          "src/pages/Library.jsx",
          "src/context/LibraryContext.jsx"
        ],
        "pages": [
          {
            "path": "/library",
            "description": "Document library with upload, collections, and search"
          }
        ]
      }
    ],
    "known_limitations": [
      {
        "issue": "Supabase free plan auto-pauses after 7 days of inactivity",
        "location": "Supabase configuration",
        "impact": "Database becomes unavailable after extended periods without API requests"
      }
    ]
  }
}
